parameters:
  - name: serviceConnection
    type: string

steps:
  - task: AzureCLI@2
    displayName: Azure Authentication
    inputs:
      scriptType: bash
      scriptLocation: inlineScript
      azureSubscription: ${{ parameters.serviceConnection }}
      addSpnToEnvironment: true
      inlineScript: |
        echo "##vso[task.setvariable variable=azureClientId]$servicePrincipalId"
        echo "##vso[task.setvariable variable=azureClientSecret]$servicePrincipalKey"
        echo "##vso[task.setvariable variable=azureTenantId]$tenantId"
