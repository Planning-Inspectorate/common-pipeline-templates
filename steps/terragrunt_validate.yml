parameters:
- name: environmentVariables
  type: object
  default: []
- name: workingDirectory
  type: string
  default: $(Build.Repository.LocalPath)


- script: |
    terragrunt run-all validate --terragrunt-include-external-dependencies
  displayName: Terragrunt Validate
  env:
    TERRAGRUNT_WORKING_DIR: ${{ parameters.workingDirectory }}
    TF_INPUT: false
    ${{ each var in parameters.environmentVariables }}:
      ${{ var.key }}: ${{ var.value }}
